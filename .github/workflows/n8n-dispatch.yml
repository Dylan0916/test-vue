name: N8N Dispatch Workflow

on:
  workflow_dispatch:
    inputs:
      test_message:
        description: '測試訊息'
        required: false
        default: '來自 n8n 的測試'
        type: string
      trigger_type:
        description: '觸發類型'
        required: false
        default: 'n8n-trigger'
        type: string

jobs:
  test-job:
    runs-on: ubuntu-latest
    steps:
      - name: Log test message
        run: |
          echo "🚀 N8N Dispatch Workflow 已成功觸發！"
          echo "📅 執行時間: $(date)"
          echo "🔧 觸發方式: ${{ github.event_name }}"
          echo "📝 測試訊息: ${{ github.event.inputs.test_message || '預設測試訊息' }}"
          echo "🏷️ 觸發類型: ${{ github.event.inputs.trigger_type || github.event.action || 'n8n-trigger' }}"
          if [ "${{ github.event_name }}" = "repository_dispatch" ]; then
            echo "📦 事件資料: ${{ toJson(github.event.client_payload) }}"
          fi
          echo "✅ 測試完成！"
      - name: Additional test output
        run: |
          echo "🎯 這是一個來自 n8n 的測試觸發"
          echo "📊 工作流程狀態: 成功執行"
          echo "🔗 觸發來源: GitHub Repository Dispatch"
          echo "⏰ 執行環境: Ubuntu Latest"
